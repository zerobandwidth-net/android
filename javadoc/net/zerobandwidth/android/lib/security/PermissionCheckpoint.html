<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_112-release) on Wed Aug 09 21:46:18 EDT 2017 -->
<title>PermissionCheckpoint</title>
<meta name="date" content="2017-08-09">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PermissionCheckpoint";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.WriteSettingsDialogClickListener.html" title="class in net.zerobandwidth.android.lib.security"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" target="_top">Frames</a></li>
<li><a href="PermissionCheckpoint.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.zerobandwidth.android.lib.security</div>
<h2 title="Class PermissionCheckpoint" class="title">Class PermissionCheckpoint</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>net.zerobandwidth.android.lib.security.PermissionCheckpoint</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">PermissionCheckpoint</span>
extends java.lang.Object</pre>
<div class="block">This class checks a specified list of "dangerous" permissions, forcing the
 user to grant each one at runtime.

 <h3>Using this Class</h3>

 <h4>Defining the List of Permissions</h4>

 <p>By default, the list of dangerous permissions is drawn from the string
 array resource named by <code>R.array#asDangerousPermissionsRequired</code> in
 this library. By default, the array is empty; the app consuming this library
 may override the resource with its own values.</p>

 <p>The consumer of this class may, alternatively, supply a different resource
 ID to one of the longer constructors. This will <i>replace</i> the default
 array resource as the definitive list of required permissions.</p>

 <h4>Maintain a Persistent Instance in the Activity</h4>

 <p>The main activity of the app should construct an instance of this class in
 its <code>onCreate</code> method, using itself as the operational context, and
 optionally specifying an alternative list of permissions.</p>

 <pre>
     protected PermissionCheckpoint m_perms = null ;

     @Override
     protected void onCreate( Bundle bndlState )
     {
         super.onCreate(bndlState) ;
         this.setContentView( R.layout.whatever ) ;
         if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.M )
             m_perms = new PermissionCheckpoint(this) ;
         // ...
     }
 </pre>

 <h4>Refresh Permission State on Each <code>onResume</code></h4>

 <p>The activity's <code>onResume</code> method must include a call to this class's
 <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#performChecks--"><code>performChecks()</code></a> method, which re-evaluates the app's permissions
 each time it is invoked.</p>

 <pre>
     @Override
     protected void onResume()
     {
         super.onResume() ;
         if( m_perms != null ) m_perms.performChecks() ;
     }
 </pre>

 <h4>Implement the Permission Request Callback</h4>

 <p>Finally, the activity must provide a callback for the Android OS in
 response to a permission request.</p>

 <h5><code>Activity</code></h5>

 <p>Modern activities include their own callback method, which must be
 overridden in your activity.</p>

 <pre>
     public class MyActivity extends Activity
     {
         protected PermissionCheckpoint m_perms = null ; // init in onCreate()

         // etc

         @RequiresApi( api = Build.VERSION_CODES.M )
         @Override
         public void onRequestPermissionsResult( int zRequestCode,
             @NonNull String[] asPermissions, @NonNull int[] azStatus )
         {
             super.onRequestPermissionsResult( zRequestCode, asPermissions, azStatus ) ;
             if( m_perms != null )
                 m_perms.processRequestResults( zRequestCode, asPermissions, azStatus ) ;
         }
     }
 </pre>

 <h5><code>AppCompatActivity</code></h5>

 <p>An activity from the compatibility library should implement the
 <code>ActivityCompat.OnRequestPermissionsResultCallback</code> interface.</p>

 <pre>
     public class MyCompatActivity extends AppCompatActivity
     implements ActivityCompat.OnRequestPermissionsResultCallback
     {
         protected PermissionCheckpoint m_perms = null ; // init in onCreate()

         // etc

         @RequiresApi( api = Build.VERSION_CODES.M )
         @Override
         public void onRequestPermissionsResult( int zRequestCode,
             @NonNull String[] asPermissions, @NonNull int[] azStatus )
         {
             if( m_perms != null )
                 m_perms.processRequestResults( zRequestCode, asPermissions, azStatus ) ;
         }
     }
 </pre>

 <h3>Acknowledgements</h3>

 Special thanks to <code>@dapayne1</code> for doing the heavy lifting on the
 research for Android 6 permissions management, and providing the original
 reference implementation from which this class was adapted.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>zerobandwidth-net/android 0.0.3 (#10)</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.WriteSettingsDialogClickListener.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint.WriteSettingsDialogClickListener</a></span></code>
<div class="block">Defines a click listener for the dialog that prompts the user to grant
 the special <code>WRITE_SETTINGS</code> permission.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#DANGER_REQUEST_CODE">DANGER_REQUEST_CODE</a></span></code>
<div class="block">An identifier used in permission requests.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#DEFAULT_DANGER_LIST_RESOURCE">DEFAULT_DANGER_LIST_RESOURCE</a></span></code>
<div class="block">The default string array resource in which dangerous permissions are
 defined.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#LOG_TAG">LOG_TAG</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected android.support.v7.app.AppCompatActivity</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_actCompatContext">m_actCompatContext</a></span></code>
<div class="block">An <code>AppCompatActivity</code> which provides the context from which
 resources are resolved and additional dialogs and activities may be
 launched.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected android.app.Activity</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_actContext">m_actContext</a></span></code>
<div class="block">An <code>Activity</code> which provides the context from which resources
 are resolved and additional dialogs and activities may be launched.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_bDialogVisible">m_bDialogVisible</a></span></code>
<div class="block">Indicates that any permission dialog is currently being displayed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected android.content.Context</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_ctx">m_ctx</a></span></code>
<div class="block">Since both <code>Activity</code> and <code>AppCompatActivity</code> are
 descendants of <code>Context</code>, this field allows whichever one we end up
 with to represent the operational context of the instance, where we can
 use <code>Context</code> for resource resolution, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.HashMap&lt;java.lang.String,java.lang.Boolean&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_mapGranted">m_mapGranted</a></span></code>
<div class="block">Tracks the list of "dangerous" permissions that need to be granted to the
 app, and the current status of each.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_resDangerList">m_resDangerList</a></span></code>
<div class="block">The resource ID of the string array that defines the list of dangerous
 permissions that should be requested.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_sFlavor">m_sFlavor</a></span></code>
<div class="block">Indicates the "build flavor" used to build the app, if any.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#PERMISSION_WRITE_SETTINGS">PERMISSION_WRITE_SETTINGS</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#PermissionCheckpoint-android.app.Activity-">PermissionCheckpoint</a></span>(android.app.Activity&nbsp;act)</code>
<div class="block">Initializes the instance with an <code>Activity</code> as the context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#PermissionCheckpoint-android.app.Activity-int-">PermissionCheckpoint</a></span>(android.app.Activity&nbsp;act,
                    int&nbsp;resDangerList)</code>
<div class="block">Initializes the instance with an <code>Activity</code> as the context.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#PermissionCheckpoint-android.support.v7.app.AppCompatActivity-">PermissionCheckpoint</a></span>(android.support.v7.app.AppCompatActivity&nbsp;act)</code>
<div class="block">Initializes the instance with an <code>AppCompatActivity</code> as the context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#PermissionCheckpoint-android.support.v7.app.AppCompatActivity-int-">PermissionCheckpoint</a></span>(android.support.v7.app.AppCompatActivity&nbsp;act,
                    int&nbsp;resDangerList)</code>
<div class="block">Initializes the instance with an <code>AppCompatActivity</code> as the context.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#checkPermission-android.content.Context-java.lang.String-">checkPermission</a></span>(android.content.Context&nbsp;ctx,
               java.lang.String&nbsp;sPermission)</code>
<div class="block">Static method allowing any class to check the momentary status of a
 permission.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#hasGrantedAll--">hasGrantedAll</a></span>()</code>
<div class="block">Evaluates whether all required "dangerous" permissions have been granted.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#init-int-">init</a></span>(int&nbsp;resDangerList)</code>
<div class="block">Initializes various fields within the instance, once context has been
 established.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#isContextAppCompat--">isContextAppCompat</a></span>()</code>
<div class="block">Indicates whether the instance's operational context is an
 <code>AppCompatActivity</code>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#logPermissionState--">logPermissionState</a></span>()</code>
<div class="block">(debug only) Dumps the current state of the permission map to the Android
 logs.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#performChecks--">performChecks</a></span>()</code>
<div class="block">This method performs all the checks necessary to determine whether the
 app has all of its required permissions.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#processRequestResults-int-java.lang.String:A-int:A-">processRequestResults</a></span>(int&nbsp;zCode,
                     java.lang.String[]&nbsp;asDangers,
                     int[]&nbsp;azStatus)</code>
<div class="block">Dialogs spawned by <code>ActivityCompat.requestPermissions(android.app.Activity, java.lang.String[], int)</code> will call
 back to this method when the user chooses any option.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#promptForOtherDangers-java.util.ArrayList-">promptForOtherDangers</a></span>(java.util.ArrayList&lt;java.lang.String&gt;&nbsp;asDangers)</code>
<div class="block">Prompts the user to enable "dangerous" permissions.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#promptForPermissions--">promptForPermissions</a></span>()</code>
<div class="block">Prompts the user to accept all "dangerous" permission requests.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#promptForWriteSettingsPermission--">promptForWriteSettingsPermission</a></span>()</code>
<div class="block">Prompts the user to enable the "write settings" permission, which can be
 administered only on a special Android OS dialog.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#promptWithAppCompatDialog-net.zerobandwidth.android.lib.security.PermissionCheckpoint.WriteSettingsDialogClickListener-">promptWithAppCompatDialog</a></span>(<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.WriteSettingsDialogClickListener.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint.WriteSettingsDialogClickListener</a>&nbsp;listener)</code>
<div class="block">If our parent activity is an <code>AppCompatActivity</code>, then we need to
 use the corresponding <code>AlertDialog</code> flavor to prompt for the
 permission.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#promptWithModernDialog-net.zerobandwidth.android.lib.security.PermissionCheckpoint.WriteSettingsDialogClickListener-">promptWithModernDialog</a></span>(<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.WriteSettingsDialogClickListener.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint.WriteSettingsDialogClickListener</a>&nbsp;listener)</code>
<div class="block">If our parent activity is an <code>Activity</code>, then we need to use the
 corresponding <code>AlertDialog</code> flavor to prompt for the permission.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG_TAG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_TAG</h4>
<pre>public static final&nbsp;java.lang.String LOG_TAG</pre>
</li>
</ul>
<a name="DANGER_REQUEST_CODE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DANGER_REQUEST_CODE</h4>
<pre>protected static final&nbsp;int DANGER_REQUEST_CODE</pre>
<div class="block">An identifier used in permission requests.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.zerobandwidth.android.lib.security.PermissionCheckpoint.DANGER_REQUEST_CODE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PERMISSION_WRITE_SETTINGS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PERMISSION_WRITE_SETTINGS</h4>
<pre>protected static final&nbsp;java.lang.String PERMISSION_WRITE_SETTINGS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.zerobandwidth.android.lib.security.PermissionCheckpoint.PERMISSION_WRITE_SETTINGS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="m_actCompatContext">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_actCompatContext</h4>
<pre>protected&nbsp;android.support.v7.app.AppCompatActivity m_actCompatContext</pre>
<div class="block">An <code>AppCompatActivity</code> which provides the context from which
 resources are resolved and additional dialogs and activities may be
 launched. Only one of <code>m_actCompatContext</code> and
 <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_actContext"><code>m_actContext</code></a> should be set for any given instance.</div>
</li>
</ul>
<a name="m_actContext">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_actContext</h4>
<pre>protected&nbsp;android.app.Activity m_actContext</pre>
<div class="block">An <code>Activity</code> which provides the context from which resources
 are resolved and additional dialogs and activities may be launched.
 Only one of <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#m_actCompatContext"><code>m_actCompatContext</code></a> and <code>m_actContext</code> should
 be set for any given instance.</div>
</li>
</ul>
<a name="m_ctx">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_ctx</h4>
<pre>protected&nbsp;android.content.Context m_ctx</pre>
<div class="block">Since both <code>Activity</code> and <code>AppCompatActivity</code> are
 descendants of <code>Context</code>, this field allows whichever one we end up
 with to represent the operational context of the instance, where we can
 use <code>Context</code> for resource resolution, etc.</div>
</li>
</ul>
<a name="DEFAULT_DANGER_LIST_RESOURCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_DANGER_LIST_RESOURCE</h4>
<pre>protected static final&nbsp;int DEFAULT_DANGER_LIST_RESOURCE</pre>
<div class="block">The default string array resource in which dangerous permissions are
 defined. Apps that use this library may choose to override this
 <code>R.array#asDangerousPermissionsRequired</code> resource, or have their
 own resource which is passed into the constructor.</div>
</li>
</ul>
<a name="m_resDangerList">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_resDangerList</h4>
<pre>protected&nbsp;int m_resDangerList</pre>
<div class="block">The resource ID of the string array that defines the list of dangerous
 permissions that should be requested. This defaults to the value of
 <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#DEFAULT_DANGER_LIST_RESOURCE"><code>DEFAULT_DANGER_LIST_RESOURCE</code></a>, which is
 <code>R.array#asDangerousPermissionsRequired</code>.</div>
</li>
</ul>
<a name="m_mapGranted">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_mapGranted</h4>
<pre>protected&nbsp;java.util.HashMap&lt;java.lang.String,java.lang.Boolean&gt; m_mapGranted</pre>
<div class="block">Tracks the list of "dangerous" permissions that need to be granted to the
 app, and the current status of each.</div>
</li>
</ul>
<a name="m_bDialogVisible">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_bDialogVisible</h4>
<pre>protected&nbsp;boolean m_bDialogVisible</pre>
<div class="block">Indicates that any permission dialog is currently being displayed.</div>
</li>
</ul>
<a name="m_sFlavor">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>m_sFlavor</h4>
<pre>protected&nbsp;java.lang.String m_sFlavor</pre>
<div class="block">Indicates the "build flavor" used to build the app, if any.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PermissionCheckpoint-android.app.Activity-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PermissionCheckpoint</h4>
<pre>public&nbsp;PermissionCheckpoint(android.app.Activity&nbsp;act)</pre>
<div class="block">Initializes the instance with an <code>Activity</code> as the context.
 The default string array resource,
 <code>R.array#asDangerousPermissionsRequired</code>, will be used to define
 the list of dangerous permissions required by the app.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>act</code> - the activity which provides operational context</dd>
</dl>
</li>
</ul>
<a name="PermissionCheckpoint-android.app.Activity-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PermissionCheckpoint</h4>
<pre>public&nbsp;PermissionCheckpoint(android.app.Activity&nbsp;act,
                            int&nbsp;resDangerList)</pre>
<div class="block">Initializes the instance with an <code>Activity</code> as the context.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>act</code> - the activity which provides operational context</dd>
<dd><code>resDangerList</code> - the resource ID for the list of dangerous
                      permissions required by the app</dd>
</dl>
</li>
</ul>
<a name="PermissionCheckpoint-android.support.v7.app.AppCompatActivity-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PermissionCheckpoint</h4>
<pre>public&nbsp;PermissionCheckpoint(android.support.v7.app.AppCompatActivity&nbsp;act)</pre>
<div class="block">Initializes the instance with an <code>AppCompatActivity</code> as the context.
 The default string array resource,
 <code>R.array#asDangerousPermissionsRequired</code>, will be used to define
 the list of dangerous permissions required by the app.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>act</code> - the activity which provides operational context</dd>
</dl>
</li>
</ul>
<a name="PermissionCheckpoint-android.support.v7.app.AppCompatActivity-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PermissionCheckpoint</h4>
<pre>public&nbsp;PermissionCheckpoint(android.support.v7.app.AppCompatActivity&nbsp;act,
                            int&nbsp;resDangerList)</pre>
<div class="block">Initializes the instance with an <code>AppCompatActivity</code> as the context.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>act</code> - the activity which provides operational context</dd>
<dd><code>resDangerList</code> - the resource ID for the list of dangerous
                      permissions required by the app</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="checkPermission-android.content.Context-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkPermission</h4>
<pre>public static&nbsp;boolean&nbsp;checkPermission(android.content.Context&nbsp;ctx,
                                      java.lang.String&nbsp;sPermission)</pre>
<div class="block">Static method allowing any class to check the momentary status of a
 permission.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - the context in which to perform the check</dd>
<dd><code>sPermission</code> - the qualified name of the permission to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> iff the permission has been granted to the app</dd>
</dl>
</li>
</ul>
<a name="init-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>protected&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;init(int&nbsp;resDangerList)</pre>
<div class="block">Initializes various fields within the instance, once context has been
 established.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resDangerList</code> - the resource ID for the list of dangerous
                      permissions required by the app</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
</dl>
</li>
</ul>
<a name="isContextAppCompat--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isContextAppCompat</h4>
<pre>protected&nbsp;boolean&nbsp;isContextAppCompat()</pre>
<div class="block">Indicates whether the instance's operational context is an
 <code>AppCompatActivity</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if an <code>AppCompatActivity</code> was used as the
  initial context for the instance</dd>
</dl>
</li>
</ul>
<a name="performChecks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>performChecks</h4>
<pre>public&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;performChecks()</pre>
<div class="block">This method performs all the checks necessary to determine whether the
 app has all of its required permissions. If any permission is still
 denied, then the method will trigger dialogs challenging the user to
 grant those permissions to the app.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
</dl>
</li>
</ul>
<a name="hasGrantedAll--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasGrantedAll</h4>
<pre>protected&nbsp;boolean&nbsp;hasGrantedAll()</pre>
<div class="block">Evaluates whether all required "dangerous" permissions have been granted.

 For most permissions, we have cached the state via
 <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#processRequestResults-int-java.lang.String:A-int:A-"><code>processRequestResults(int, java.lang.String[], int[])</code></a>, but for the <code>WRITE_SETTINGS</code>
 permission, we have to explicitly re-check it, because there's no way to
 listen for a state-change event from the Android OS's application
 manager.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if all permissions are granted.</dd>
</dl>
</li>
</ul>
<a name="logPermissionState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logPermissionState</h4>
<pre>protected&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;logPermissionState()</pre>
<div class="block">(debug only) Dumps the current state of the permission map to the Android
 logs.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#hasGrantedAll--"><code>hasGrantedAll()</code></a></dd>
</dl>
</li>
</ul>
<a name="promptForPermissions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promptForPermissions</h4>
<pre>protected&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;promptForPermissions()</pre>
<div class="block">Prompts the user to accept all "dangerous" permission requests.

 The method tries to ask for just regularly-dangerous permissions first,
 then asks for the "write settings" permission if all others have been
 granted.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
</dl>
</li>
</ul>
<a name="promptForWriteSettingsPermission--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promptForWriteSettingsPermission</h4>
<pre>protected&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;promptForWriteSettingsPermission()</pre>
<div class="block">Prompts the user to enable the "write settings" permission, which can be
 administered only on a special Android OS dialog.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
</dl>
</li>
</ul>
<a name="promptWithAppCompatDialog-net.zerobandwidth.android.lib.security.PermissionCheckpoint.WriteSettingsDialogClickListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promptWithAppCompatDialog</h4>
<pre>protected&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;promptWithAppCompatDialog(<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.WriteSettingsDialogClickListener.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint.WriteSettingsDialogClickListener</a>&nbsp;listener)</pre>
<div class="block">If our parent activity is an <code>AppCompatActivity</code>, then we need to
 use the corresponding <code>AlertDialog</code> flavor to prompt for the
 permission.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - the click listener for the "OK" button</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#promptForWriteSettingsPermission--"><code>promptForWriteSettingsPermission()</code></a></dd>
</dl>
</li>
</ul>
<a name="promptWithModernDialog-net.zerobandwidth.android.lib.security.PermissionCheckpoint.WriteSettingsDialogClickListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promptWithModernDialog</h4>
<pre>protected&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;promptWithModernDialog(<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.WriteSettingsDialogClickListener.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint.WriteSettingsDialogClickListener</a>&nbsp;listener)</pre>
<div class="block">If our parent activity is an <code>Activity</code>, then we need to use the
 corresponding <code>AlertDialog</code> flavor to prompt for the permission.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - the click listener for the "OK" button</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#promptForWriteSettingsPermission--"><code>promptForWriteSettingsPermission()</code></a></dd>
</dl>
</li>
</ul>
<a name="promptForOtherDangers-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promptForOtherDangers</h4>
<pre>protected&nbsp;<a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" title="class in net.zerobandwidth.android.lib.security">PermissionCheckpoint</a>&nbsp;promptForOtherDangers(java.util.ArrayList&lt;java.lang.String&gt;&nbsp;asDangers)</pre>
<div class="block">Prompts the user to enable "dangerous" permissions.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>asDangers</code> - a list of dangerous permissions</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(fluid)</dd>
</dl>
</li>
</ul>
<a name="processRequestResults-int-java.lang.String:A-int:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processRequestResults</h4>
<pre>public&nbsp;void&nbsp;processRequestResults(int&nbsp;zCode,
                                  @NonNull
                                  java.lang.String[]&nbsp;asDangers,
                                  @NonNull
                                  int[]&nbsp;azStatus)</pre>
<div class="block">Dialogs spawned by <code>ActivityCompat.requestPermissions(android.app.Activity, java.lang.String[], int)</code> will call
 back to this method when the user chooses any option. We will use this
 callback to re-check the permission array and determine whether we need
 to try again.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>zCode</code> - the request code (we are interested in
              <a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.html#DANGER_REQUEST_CODE"><code>DANGER_REQUEST_CODE</code></a>)</dd>
<dd><code>asDangers</code> - an array of permissions that were requested</dd>
<dd><code>azStatus</code> - an array of result indicators</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../net/zerobandwidth/android/lib/security/PermissionCheckpoint.WriteSettingsDialogClickListener.html" title="class in net.zerobandwidth.android.lib.security"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/zerobandwidth/android/lib/security/PermissionCheckpoint.html" target="_top">Frames</a></li>
<li><a href="PermissionCheckpoint.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
