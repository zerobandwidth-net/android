<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SchematicException.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">net.zer0bandwidth.android.lib.database.sqlitehouse.exceptions</a> &gt; <span class="el_source">SchematicException.java</span></div><h1>SchematicException.java</h1><pre class="source lang-java linenums">package net.zer0bandwidth.android.lib.database.sqlitehouse.exceptions;

import net.zer0bandwidth.android.lib.database.sqlitehouse.SQLightable;

import java.lang.reflect.Field;
import java.util.List;

/**
 * Thrown by
 * {@link net.zer0bandwidth.android.lib.database.sqlitehouse.SQLiteHouse}
 * whenever a method encounters a problem with the schema definition discovered
 * in some schematic class.
 * @since zer0bandwidth-net/android 0.1.4 (#26)
 */
public class SchematicException
extends RuntimeException
{
	/**
	 * Returns a new exception that notes a condition that can't happen: namely,
	 * that a field we had previously made accessible wasn't accessible when
	 * subsequently accessed.
	 * @param sClassName the name of the schematic class (since 0.1.6 #47)
	 * @param sFieldName the name of the field (since 0.1.6 #47)
	 * @param xAccess the exception
	 * @return a new exception with an appropriate message.
	 */
	public static SchematicException fieldWasInaccessible(
			String sClassName, String sFieldName, IllegalAccessException xAccess )
	{
<span class="fc" id="L30">		return new SchematicException( (new StringBuilder())</span>
<span class="fc" id="L31">				.append( &quot;Field [&quot; ).append( sFieldName )</span>
<span class="fc" id="L32">				.append( &quot;] in class [&quot; ).append( sClassName )</span>
<span class="fc" id="L33">				.append( &quot;] was inaccessible. This shouldn't be possible!&quot; )</span>
<span class="fc" id="L34">				.toString()</span>
			, xAccess ) ;
	}

	/**
	 * Returns a new exception to be thrown when a field's mapping into an
	 * existing table can't be resolved. This shouldn't be possible when a
	 * {@code SQLiteHouse} database is used from the beginning, but might arise
	 * when there are mismatches in the annotations, or when migrating from a
	 * non-{@code SQLiteHouse} database implementation.
	 * @param sClassName the name of the field's class
	 * @param sFieldName the name of the sought field
	 * @param sTableName the table in which the column was expected
	 * @param x root-cause exception, if any
	 * @return a new exception with an informative message
	 * @since zer0bandwidth-net/android 0.1.6 (#47)
	 */
	@SuppressWarnings(&quot;unused&quot;)
	public static SchematicException columnNotFound(
			String sClassName, String sFieldName, String sTableName, Throwable x )
	{
<span class="nc" id="L55">		return new SchematicException( (new StringBuilder())</span>
<span class="nc" id="L56">				.append( &quot;Column for field [&quot; ).append( sFieldName )</span>
<span class="nc" id="L57">				.append( &quot;] in class [&quot; ).append( sClassName )</span>
<span class="nc" id="L58">				.append( &quot;] not found in table [&quot; ).append( sTableName )</span>
<span class="nc" id="L59">				.append( &quot;]; versions or annotations might be mismatched.&quot; )</span>
<span class="nc" id="L60">				.toString()</span>
			, x ) ;
	}

	/**
	 * Returns an exception to be thrown when a field that was supposed to
	 * represent a column isn't properly annotated.
	 * @param fld the field
	 * @return a new exception with an informative message
	 * @since zer0bandwidth-net/android 0.1.7 (#50)
	 */
	public static SchematicException fieldNotAnnotated( Field fld )
	{
<span class="fc" id="L73">		return new SchematicException( (new StringBuilder())</span>
<span class="fc" id="L74">				.append( &quot;Cannot analyze field [&quot; ).append( fld.getName() )</span>
<span class="fc" id="L75">				.append( &quot;] of class [&quot; )</span>
<span class="fc" id="L76">				.append( fld.getDeclaringClass().getCanonicalName() )</span>
<span class="fc" id="L77">				.append( &quot;]: Field is not properly annotated.&quot; )</span>
<span class="fc" id="L78">				.toString()</span>
			);
	}

	/**
	 * Returns an exception to be thrown when an attempt to create or update the
	 * SQLite database fails because the SQL statement failed.
	 * @param refl a reflection of the schematic class that failed
	 * @param sSQL the SQL statement that was executed
	 * @param xCause the root cause of the failure, if any (may be null)
	 * @return a new exception with an informative message
	 * @since zer0bandwidth-net/android 0.1.7 (#50)
	 */
	public static SchematicException tableCreationOrUpdateFailed(
			SQLightable.Reflection refl, String sSQL, Throwable xCause )
	{
<span class="nc" id="L94">		String sMessage = (new StringBuilder())</span>
<span class="nc" id="L95">				.append( &quot;Failed to create table for class [&quot; )</span>
<span class="nc" id="L96">				.append( refl.getTableClass().getCanonicalName() )</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">				.append( &quot;] when executing SQL statement: &quot; )</span>
<span class="nc" id="L98">				.append(( sSQL == null ? &quot;(null)&quot; : sSQL ))</span>
<span class="nc" id="L99">				.toString()</span>
				;
<span class="nc" id="L101">		return new SchematicException( sMessage, xCause ) ;</span>
	}

	/**
	 * Returns an exception to be thrown when a column operation cannot continue
	 * because the column's
	 * {@link net.zer0bandwidth.android.lib.database.sqlitehouse.refractor.Refractor}
	 * implementation cannot be determined.
	 * @param col the column on which the operation would be performed
	 * @param xCause the cause of the failure, if any (may be null)
	 * @return a new exception with an informative error message
	 * @since zer0bandwidth-net/android 0.1.7 (#50)
	 */
	public static SchematicException noLensForColumn(
			SQLightable.Reflection.Column col, Throwable xCause )
<span class="fc" id="L116">	{ return noLensForField( col.getField(), xCause ) ; }</span>

	/**
	 * Returns an exception to be thrown when an operation cannot continue
	 * because a field/column's
	 * {@link net.zer0bandwidth.android.lib.database.sqlitehouse.refractor.Refractor}
	 * implementation cannot be determined
	 * @param fld the field on which the operation would be performed
	 * @param xCause the cause of the failure, if any (may be null)
	 * @return a new exception with an informative error message
	 * @since zer0bandwidth-net/android 0.1.7 (#50)
	 */
	public static SchematicException noLensForField( Field fld, Throwable xCause )
	{
<span class="fc" id="L130">		String sMessage = (new StringBuilder())</span>
<span class="fc" id="L131">				.append( &quot;No refractor implementation found for field [&quot; )</span>
<span class="fc" id="L132">				.append( fld.getName() )</span>
<span class="fc" id="L133">				.append( &quot;] of class [&quot; )</span>
<span class="fc" id="L134">				.append( fld.getDeclaringClass().getCanonicalName() )</span>
<span class="fc" id="L135">				.append( &quot;].&quot; )</span>
<span class="fc" id="L136">				.toString()</span>
				;
<span class="fc" id="L138">		return new SchematicException( sMessage, xCause ) ;</span>
	}

	/**
	 * Returns an exception to be thrown when a method tries to operate on a
	 * schematic class that is not actually part of a defined schema.
	 * @param cls the class that is not part of the schema
	 * @param aclsSchema the classes that are part of the schema
	 * @return a new exception with an informative error message
	 * @since zer0bandwidth-net/android 0.1.7 (#50)
	 */
	public static SchematicException classNotInSchema(
			Class&lt;? extends SQLightable&gt; cls,
			List&lt;Class&lt;? extends SQLightable&gt;&gt; aclsSchema )
	{
<span class="fc" id="L153">		StringBuilder sb = (new StringBuilder())</span>
<span class="fc" id="L154">			.append( &quot;Class [&quot; ).append( cls.getSimpleName() )</span>
<span class="fc" id="L155">			.append( &quot;] is not part of the schema: { &quot; )</span>
			;
<span class="fc bfc" id="L157" title="All 2 branches covered.">		for( Class&lt;? extends SQLightable&gt; clsSchema : aclsSchema )</span>
<span class="fc" id="L158">			sb.append( clsSchema.getSimpleName() ).append( &quot; &quot; ) ;</span>
<span class="fc" id="L159">		sb.append( &quot;}&quot; ) ;</span>
<span class="fc" id="L160">		return new SchematicException( sb.toString() ) ;</span>
	}

	public static final String DEFAULT_MESSAGE =
			&quot;Defined database schema does not support this operation.&quot; ;

	@SuppressWarnings( &quot;unused&quot; )
	public SchematicException()
<span class="nc" id="L168">	{ super( DEFAULT_MESSAGE ) ; }</span>

	public SchematicException( String sMessage )
<span class="fc" id="L171">	{ super( sMessage ) ; }</span>

	@SuppressWarnings( &quot;unused&quot; )
	public SchematicException( Throwable xCause )
<span class="nc" id="L175">	{ super( DEFAULT_MESSAGE, xCause ) ; }</span>

	public SchematicException( String sMessage, Throwable xCause )
<span class="fc" id="L178">	{ super( sMessage, xCause ) ; }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span>Generated by the Android Gradle plugin 3.1.3</div></body></html>