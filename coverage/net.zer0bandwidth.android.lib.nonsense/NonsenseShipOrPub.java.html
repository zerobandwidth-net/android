<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NonsenseShipOrPub.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">net.zer0bandwidth.android.lib.nonsense</a> &gt; <span class="el_source">NonsenseShipOrPub.java</span></div><h1>NonsenseShipOrPub.java</h1><pre class="source lang-java linenums">package net.zer0bandwidth.android.lib.nonsense;

import android.content.Context;

import net.zer0bandwidth.android.lib.R;
import net.zer0bandwidth.android.lib.text.format.TitleFormatter;

import java.util.Collection;
import java.util.Random;

/**
 * Builds a random name of a ship&amp;hellip; or a pub&amp;hellip; or something.
 *
 * &lt;p&gt;Both ships and pubs seem to have names that follow the general pattern of
 * &quot;The &amp;lt;adjective&amp;gt; &amp;lt;noun&amp;gt;&quot;, like &quot;The Salty Dog&quot; or &quot;The Mourning
 * Glory&quot; or &quot;The Rapacious Tardigrade&quot;. OK, maybe not the last one. Anyway,
 * since {@link NonsenseBuilder} worked out so well, and this is actually a
 * &lt;i&gt;simpler&lt;/i&gt; algorithm, it seemed only right to go ahead with this now.&lt;/p&gt;
 *
 * &lt;p&gt;As with {@code NonsenseBuilder}, this class makes use of two of the array
 * resources that are included with the library:&lt;/p&gt;
 *
 * &lt;ul&gt;
 *     &lt;li&gt;{@link R.array#asNonsenseAdjectives}&lt;/li&gt;
 *     &lt;li&gt;{@link R.array#asNonsenseNouns}&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;p&gt;Applications using this class may choose to have overrides for either or
 * both of these string resources, in order to customize the text that might be
 * rendered in the randomized names.&lt;/p&gt;
 *
 * @since zer0bandwidth-net/android 0.1.5 (#11)
 */
public class NonsenseShipOrPub
implements NonsenseGenerator
{
	/**
	 * The internal RNG of the builder, used to select each token in the name.
	 */
<span class="fc" id="L40">	protected static final Random RANDOM = new Random() ;</span>

	/**
	 * By default, this class will always begin the name with a &quot;The&quot;. Use the
	 * {@link #setArticleChance(int)} method to alter the instance's chance at
	 * runtime.
	 * @see #m_nArticleChance
	 */
	protected static final int DEFAULT_ARTICLE_CHANCE = 100 ;

	/** A context in which the string resources are available. */
<span class="fc" id="L51">	protected Context m_ctx = null ;</span>

	/**
	 * The percent chance that the builder will begin the random name with
	 * &quot;The&quot;. By default, this chance is 100%; consumers may change this by
	 * calling {@link #setArticleChance(int)}.
	 * @see #DEFAULT_ARTICLE_CHANCE
	 */
<span class="fc" id="L59">	protected int m_nArticleChance = DEFAULT_ARTICLE_CHANCE ;</span>

	/**
	 * A list of adjectives. This may be overridden with {@link #setAdjectives}.
	 */
<span class="fc" id="L64">	protected String[] m_asAdjectives = null ;</span>

	/**
	 * A list of nouns. This may be overridden with {@link #setNouns}.
	 */
<span class="fc" id="L69">	protected String[] m_asNouns = null ;</span>

	/**
	 * A constructor which sets the resource context.
	 * @param ctx a context in which string resources are available
	 */
	public NonsenseShipOrPub( Context ctx )
<span class="fc" id="L76">	{</span>
<span class="fc" id="L77">		this.setContext( ctx )</span>
<span class="fc" id="L78">		    .setAdjectives( R.array.asNonsenseAdjectives )</span>
<span class="fc" id="L79">		    .setNouns( R.array.asNonsenseNouns )</span>
		    ;
<span class="fc" id="L81">	}</span>

	/**
	 * Sets the resource context.
	 * @param ctx the context in which string resources are available
	 * @return (fluid)
	 */
	@Override
	public NonsenseShipOrPub setContext( Context ctx )
<span class="fc" id="L90">	{ m_ctx = ctx ; return this ; }</span>

	/**
	 * Sets the chance that the builder will begin the name with &quot;The&quot;. By
	 * default, this chance is 100%.
	 * If the parameter given is less than 0 or greater than 100, then the new
	 * value will be silently ignored.
	 * @param nChance an integer between 0 and 100 (inclusive)
	 * @return (fluid)
	 */
	public NonsenseShipOrPub setArticleChance( int nChance )
	{
<span class="fc bfc" id="L102" title="All 4 branches covered.">		if( nChance &lt; 0 || nChance &gt; 100 ) return this ; // trivially</span>
<span class="fc" id="L103">		m_nArticleChance = nChance ;</span>
<span class="fc" id="L104">		return this ;</span>
	}

	/**
	 * Defines the set of adjectives that should be considered when generating
	 * the name.
	 * @param resAdjectives the resource ID of an array of adjectives
	 * @return (fluid)
	 */
	public NonsenseShipOrPub setAdjectives( int resAdjectives )
	{
<span class="fc" id="L115">		m_asAdjectives = m_ctx.getResources().getStringArray( resAdjectives ) ;</span>
<span class="fc" id="L116">		return this ;</span>
	}

	/**
	 * Defines the set of adjectives that should be considered when generating
	 * the name.
	 * @param asAdjectives a collection of adjective strings
	 * @return (fluid)
	 */
	public NonsenseShipOrPub setAdjectives( Collection&lt;String&gt; asAdjectives )
	{
<span class="fc" id="L127">		m_asAdjectives =</span>
<span class="fc" id="L128">				asAdjectives.toArray( new String[asAdjectives.size()] ) ;</span>
<span class="fc" id="L129">		return this ;</span>
	}

	/**
	 * Defines the set of nouns that should be considered when generating the
	 * name.
	 * @param resNouns the resource ID of an array of nouns
	 * @return (fluid)
	 */
	public NonsenseShipOrPub setNouns( int resNouns )
	{
<span class="fc" id="L140">		m_asNouns = m_ctx.getResources().getStringArray( resNouns ) ;</span>
<span class="fc" id="L141">		return this ;</span>
	}

	/**
	 * Defines the set of nouns that should be considered when generating the
	 * name.
	 * @param asNouns a collection of noun strings
	 * @return (fluid)
	 */
	public NonsenseShipOrPub setNouns( Collection&lt;String&gt; asNouns )
	{
<span class="fc" id="L152">		m_asNouns = asNouns.toArray( new String[asNouns.size()] ) ;</span>
<span class="fc" id="L153">		return this ;</span>
	}

	/**
	 * Generates the name.
	 * @return the name of a ship, or a pub, or whatever
	 */
	@SuppressWarnings(&quot;StringBufferReplaceableByString&quot;)
	@Override
	public String getString()
	{
<span class="fc" id="L164">		StringBuilder sb = new StringBuilder() ;</span>

<span class="fc" id="L166">		sb.append( this.getArticle() )</span>
<span class="fc" id="L167">		  .append( m_asAdjectives[ RANDOM.nextInt( m_asAdjectives.length ) ] )</span>
<span class="fc" id="L168">		  .append( &quot; &quot; )</span>
<span class="fc" id="L169">		  .append( this.getStrippedNoun() )</span>
		  ;

<span class="fc" id="L172">		return TitleFormatter.format( m_ctx, sb.toString() ) ;</span>
	}

	/**
	 * Might start us off with ah &quot;The&quot;. Or it might not.
	 * @return &quot;The &quot; or an empty string
	 */
	protected String getArticle()
	{
<span class="fc bfc" id="L181" title="All 2 branches covered.">		if( m_nArticleChance == 0 ) return &quot;&quot; ; // trivially</span>
<span class="fc bfc" id="L182" title="All 4 branches covered.">		if( m_nArticleChance &lt; 100 &amp;&amp; RANDOM.nextInt(100) &gt;= m_nArticleChance )</span>
<span class="fc" id="L183">			return &quot;&quot; ; // trivially</span>

<span class="fc" id="L185">		return &quot;The &quot; ;</span>
	}

	/**
	 * Ensures that we strip any article that was already included with the
	 * noun resource.
	 * @return the naked noun
	 */
	protected String getStrippedNoun()
	{
<span class="fc" id="L195">		String sNoun = m_asNouns[ RANDOM.nextInt( m_asNouns.length ) ] ;</span>
<span class="fc bfc" id="L196" title="All 2 branches covered.">		if( Utils.startsWithArticle(sNoun) )</span>
<span class="fc" id="L197">			return (sNoun.split( &quot; &quot;, 2 ))[1] ;</span>
		else
<span class="fc" id="L199">			return sNoun ;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span>Generated by the Android Gradle plugin 3.1.3</div></body></html>